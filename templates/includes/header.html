{% load static %}
<header class="bg-white/60 dark:bg-gray-900/60 backdrop-blur sticky top-0 z-40 shadow">
  <div class="max-w-7xl mx-auto px-4 py-3 flex items-center justify-between">
    <div class="flex items-center gap-6">
      <a href="{% url 'index' %}" class="flex items-center gap-3">
        <div class="w-10 h-10 bg-indigo-600 rounded flex items-center justify-center text-white font-bold">A</div>
        <span class="text-lg font-bold text-gray-900 dark:text-gray-100">App Web</span>
      </a>

      <nav class="hidden md:flex items-center gap-4 text-sm">
        <a href="{% url 'index' %}" class="px-2 py-1 rounded text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800">Início</a>
        <a href="#produtos" class="px-2 py-1 rounded text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800">Produtos</a>
        <a href="#" class="px-2 py-1 rounded text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800">Sobre</a>
      </nav>
    </div>

    <div class="flex items-center gap-4">
      <div class="hidden sm:block">
        <label class="relative block">
          <span class="sr-only">Pesquisar</span>
          <input class="placeholder-gray-400/70 bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded-md py-2 px-3 w-56 focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="Pesquisar produtos..." type="search" name="search" />
          <svg class="w-4 h-4 text-gray-500 dark:text-gray-300 absolute right-3 top-1/2 -translate-y-1/2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-4.35-4.35M11 19a8 8 0 100-16 8 8 0 000 16z"/></svg>
        </label>
      </div>

      <div class="flex items-center gap-3">
        {% if user.is_authenticated %}
          <a href="{% url 'dashboard' %}" class="text-sm text-gray-700 dark:text-gray-200 px-3 py-1 rounded hover:bg-gray-100 dark:hover:bg-gray-800">Olá, {{ user.username }}</a>
          <a href="{% url 'logout' %}" class="text-sm text-red-500 px-3 py-1 rounded hover:bg-red-500/10">Sair</a>
        {% else %}
          <a href="{% url 'login' %}" class="text-sm px-3 py-1 bg-indigo-600 text-white rounded">Entrar</a>
        {% endif %}

        <!-- Theme toggle -->
        <button id="themeToggle" aria-label="Alternar tema" class="p-2 rounded bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 hover:opacity-90">
          <svg id="iconTheme" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
            <path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1z" />
          </svg>
        </button>
      </div>
    </div>
  </div>

  <script>
    (function(){
      const btn = document.getElementById('themeToggle');
      const root = document.documentElement;
      if(localStorage.getItem('theme') === 'dark') root.classList.add('dark');
      btn.addEventListener('click', ()=>{
        root.classList.toggle('dark');
        localStorage.setItem('theme', root.classList.contains('dark') ? 'dark' : 'light');
      });
    })();
  </script>
</header>
